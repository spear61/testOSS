if ( ! window.enview )
    window.enview = new Object();
	
if ( ! window.enview.util )
    window.enview.util = new Object();
	
enview.util.Validator = function () {  }
enview.util.Validator.prototype =
{
	validate : function(dataStructure, form)
	{
		var isValid = true;
		//alert("dataStructure.length=" + dataStructure.length);
		for(var i=0; i<dataStructure.length; i++) {
			var validations = dataStructure[i].validation.split(",");
			//alert("validations.length=" + validations.length);
			for(var j=0; j<validations.length; j++) {
				//var methodStr = "validate"+validations[j];
				//alert("methodStr=" + methodStr);
				//var method = eval( "(portalValidator.validate"+validations[j]+")" );
				//method(dataStructure[i], form);
				//this.validateRequired(dataStructure[i], form);
				//alert("method=" + validations[j]);
				switch( validations[j] ) {
					case 'Required' :
						isValid = this.validateRequired(dataStructure[i], form);
						break;
					case 'MinLength' :
						isValid = this.validateMinLength(dataStructure[i], form);
						break;
					case 'MaxLength' :
						isValid = this.validateMaxLength(dataStructure[i], form);
						break;
					case 'Mask' :
						isValid = this.validateMask(dataStructure[i], form);
						break;
					case 'Byte' :
						isValid = this.validateByte(dataStructure[i], form);
						break;
					case 'Short' :
						isValid = this.validateShort(dataStructure[i], form);
						break;
					case 'Integer' :
						isValid = this.validateInteger(dataStructure[i], form);
						break;
					case 'Float' :
						isValid = this.validateFloat(dataStructure[i], form);
						break;
					case 'Date' :
						isValid = this.validateDate(dataStructure[i], form);
						break;
					case 'IntRange' :
						isValid = this.validateIntRange(dataStructure[i], form);
						break;
					case 'FloatRange' :
						isValid = this.validateFloatRange(dataStructure[i], form);
						break;
					case 'CreditCard' :
						isValid = this.validateCreditCard(dataStructure[i], form);
						break;
					case 'Email' :
						isValid = this.validateEmail(dataStructure[i], form);
						break;
					case 'IhIdNum' :
						isValid = this.validateIhIdNum(dataStructure[i], form);
						break;
					case 'Korean' :
						isValid = this.validateKorean(dataStructure[i], form);
						break;
				}
				if( isValid == false ) return false;
			}
		}
	},
	/* ?ê¾©ë‹”åª›?ï§£ëŒ„ê²• */
	validateRequired : function(data, form) 
	{
		var isValid = true;
		//alert("data.fieldName=" + data.fieldName + ", form=" + form);
		var field = form[data.fieldName];
		//alert("data.fieldName=" + data.fieldName + ", field=" + field);
		if (field.type == 'text' ||
			field.type == 'textarea' ||
			field.type == 'file' ||
			field.type == 'select-one' ||
			field.type == 'radio' ||
			field.type == 'password') {
			
			var value = '';
			// get field's value
			if (field.type == "select-one") {
				var si = field.selectedIndex;
				if (si >= 0) {
					value = field.options[si].value;
				}
			} else {
				value = field.value;
			}
			
			if (this.trim(value).length == 0) {
			
				field.focus();
				var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
				// portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
				var msg = portalPage.getMessageResourceByParam('ev.error.validation.required', fieldName);
				alert( msg );
				isValid = false;
			}
		}
		return isValid;
	},
	// Trim whitespace from left and right sides of s.
	trim : function(s) 
	{
		return s.replace( /^\s*/, "" ).replace( /\s*$/, "" );
	},
	/* ï§¤ì’–ëƒ¼ æ¹²ëª„ì”  ï§£ëŒ„ê²• */
	validateMinLength : function(data, form) 
	{
		var isValid = true;
		var field = form[data.fieldName];
			
		if (field.type == 'text' ||
			field.type == 'textarea') {
			
			var iMin = parseInt(data.minlength);
			if ((this.trim(field.value).length > 0) && (field.value.length < iMin)) {
				field.focus();
				var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
				//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
				var msg = portalPage.getMessageResourceByParam('ev.error.validation.minlength', fieldName);
				alert( msg );
				isValid = false;
			}
		}
		return isValid;
	},
	/* ï§¤ì’•? æ¹²ëª„ì”  ï§£ëŒ„ê²• */
	validateMaxLength : function(data, form) 
	{
		//alert("data=" + data + ", form=" + form);
		var isValid = true;
		var field = form[data.fieldName];
			
		if (field.type == 'text' ||
			field.type == 'textarea') {
				
			var iMax = parseInt(data.maxlength);
			if (field.value.length > iMax) {
				field.focus();
				var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
				//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
				var msg = portalPage.getMessageResourceByParam('ev.error.validation.maxlength', fieldName);
				alert( msg );
				isValid = false;
			}
		}
		return isValid;
	},
	/* ?ëº¢í‡‹??ï§£ëŒ„ê²• */
	validateMask : function(data, form) 
	{
		var isValid = true;
		var field = form[data.fieldName];
			
		if ((field.type == 'text' || 
			 field.type == 'textarea') && 
			 (field.value.length > 0)) {
			
			if (!this.matchPattern(field.value, data.mask)) {
				field.focus();
				var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
				//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
				var msg = portalPage.getMessageResourceByParam('ev.error.validation.mask', fieldName);
				alert( msg );
				isValid = false;
			}
		}
		return isValid;
	},
	matchPattern : function(value, mask) 
	{
	   return mask.exec(value);
	},
	/* Byte??ï§£ëŒ„ê²• */
	validateByte : function(data, form) 
	{
		var bValid = true;
		var field = form[data.fieldName];
			
		if (field.type == 'text' ||
			field.type == 'textarea' ||
			field.type == 'select-one' ||
			field.type == 'radio') {

			var value = '';
			// get field's value
			if (field.type == "select-one") {
				var si = field.selectedIndex;
				if (si >= 0) {
					value = field.options[si].value;
				}
			} else {
				value = field.value;
			}
			
			if (value.length > 0) {
				if (!this.isAllDigits(value)) {
					bValid = false;
					field.focus();
					var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
					//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
					var msg = portalPage.getMessageResourceByParam('ev.error.validation.byte', fieldName);
					alert( msg );
				} else {

					var iValue = parseInt(value);
					if (isNaN(iValue) || !(iValue >= -128 && iValue <= 127)) {
						field.focus();
						var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
						//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
						var msg = portalPage.getMessageResourceByParam('ev.error.validation.byte', fieldName);
						alert( msg );
						bValid = false;
					}
				}
			}
		}
		return bValid;
	},
	/* Short??ï§£ëŒ„ê²• */
	validateShort : function(data, form) 
	{
		var bValid = true;
		var field = form[data.fieldName];
		//alert("data.fieldName=" + data.fieldName + ", form=" + form);
		if (field.type == 'text' ||
			field.type == 'textarea' ||
			field.type == 'select-one' ||
			field.type == 'radio') {
			
			var value = '';
			// get field's value
			if (field.type == "select-one") {
				var si = field.selectedIndex;
				if (si >= 0) {
					value = field.options[si].value;
				}
			} else {
				value = field.value;
			}
			
			if (value.length > 0) {
				if (!this.isAllDigits(value)) {
					bValid = false;
					field.focus();
					var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
					//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
					var msg = portalPage.getMessageResourceByParam('ev.error.validation.short', fieldName);
					alert( msg );

				} else {
			
					var iValue = parseInt(value);
					if (isNaN(iValue) || !(iValue >= -32768 && iValue <= 32767)) {
						field.focus();
						var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
						//var fieldName = portalPage.getMessageResource('pt.ev.property.' + data.fieldName);
						var msg = portalPage.getMessageResourceByParam('ev.error.validation.short', fieldName);
						alert( msg );
						bValid = false;
					}
			   }
		   }
		}
		return bValid;
	},
	/* Integer??ï§£ëŒ„ê²• */
	validateInteger : function(data, form) 
	{
		var bValid = true;
		var field = form[data.fieldName];

		if (field.type == 'text' ||
			field.type == 'textarea' ||
			field.type == 'select-one' ||
			field.type == 'radio') {
			
			var value = '';
			// get field's value
			if (field.type == "select-one") {
				var si = field.selectedIndex;
				if (si >= 0) {
					value = field.options[si].value;
				}
			} else {
				value = field.value;
			}
			
			if (value.length > 0) {
			
				if (!this.isAllDigits(value)) {
					bValid = false;
					field.focus();
					var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
					//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
					var msg = portalPage.getMessageResourceByParam('ev.error.validation.integer', fieldName);
					alert( msg );
					
				} else {
					var iValue = parseInt(value);
					if (isNaN(iValue) || !(iValue >= -2147483648 && iValue <= 2147483647)) {
						field.focus();
						var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
						//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
						var msg = portalPage.getMessageResourceByParam('ev.error.validation.integer', fieldName);
						alert( msg );
						bValid = false;
				   }
			   }
		   }
		}
		return bValid;
	},
	isAllDigits : function(argvalue) 
	{
		argvalue = argvalue.toString();
		var validChars = "0123456789";
		var startFrom = 0;
		if (argvalue.substring(0, 2) == "0x") {
		   validChars = "0123456789abcdefABCDEF";
		   startFrom = 2;
		} else if (argvalue.charAt(0) == "0") {
		   validChars = "01234567";
		   startFrom = 1;
		} else if (argvalue.charAt(0) == "-") {
			startFrom = 1;
		}
		
		for (var n = startFrom; n < argvalue.length; n++) {
			if (validChars.indexOf(argvalue.substring(n, n+1)) == -1) return false;
		}
		return true;
	},
	/* Float??ï§£ëŒ„ê²• */
	validateFloat : function(data, form) 
	{
		var bValid = true;
		var field = form[data.fieldName];
			
		if (field.type == 'text' ||
			field.type == 'textarea' ||
			field.type == 'select-one' ||
			field.type == 'radio') {
			
			var value = '';
			// get field's value
			if (field.type == "select-one") {
				var si = field.selectedIndex;
				if (si >= 0) {
					value = field.options[si].value;
				}
			} else {
				value = field.value;
			}
			
			if (value.length > 0) {
				// remove '.' before checking digits
				var tempArray = value.split('.');
				var joinedString= tempArray.join('');

				if (!this.isAllDigits(joinedString)) {
					bValid = false;
					field.focus();
					var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
					//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
					var msg = portalPage.getMessageResourceByParam('ev.error.validation.float', fieldName);
					alert( msg );

				} else {
					var iValue = parseFloat(value);
					if (isNaN(iValue)) {
						field.focus();
						var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
						//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
						var msg = portalPage.getMessageResourceByParam('ev.error.validation.float', fieldName);
						alert( msg );
						bValid = false;
					}
				}
			}
		}
		return bValid;
	},
	/* Date??ï§£ëŒ„ê²• */
	validateDate : function(data, form) 
	{
	   var bValid = true;
	   var field = form[data.fieldName];
	   var datePattern = data.datePatternStrict;
	   if ((field.type == 'text' ||
			field.type == 'textarea') &&
		   (value.length > 0) &&
		   (datePattern.length > 0)) {
		 var MONTH = "MM";
		 var DAY = "dd";
		 var YEAR = "yyyy";
		 var orderMonth = datePattern.indexOf(MONTH);
		 var orderDay = datePattern.indexOf(DAY);
		 var orderYear = datePattern.indexOf(YEAR);
		 if ((orderDay < orderYear && orderDay > orderMonth)) {
			 var iDelim1 = orderMonth + MONTH.length;
			 var iDelim2 = orderDay + DAY.length;
			 var delim1 = datePattern.substring(iDelim1, iDelim1 + 1);
			 var delim2 = datePattern.substring(iDelim2, iDelim2 + 1);
			 if (iDelim1 == orderDay && iDelim2 == orderYear) {
				dateRegexp = new RegExp("^(\\d{2})(\\d{2})(\\d{4})$");
			 } else if (iDelim1 == orderDay) {
				dateRegexp = new RegExp("^(\\d{2})(\\d{2})[" + delim2 + "](\\d{4})$");
			 } else if (iDelim2 == orderYear) {
				dateRegexp = new RegExp("^(\\d{2})[" + delim1 + "](\\d{2})(\\d{4})$");
			 } else {
				dateRegexp = new RegExp("^(\\d{2})[" + delim1 + "](\\d{2})[" + delim2 + "](\\d{4})$");
			 }
			 var matched = dateRegexp.exec(value);
			 if(matched != null) {
				if (!this.isValidDate(matched[2], matched[1], matched[3])) {
					field.focus();
					var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
					//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
					var msg = portalPage.getMessageResourceByParam('ev.error.validation.date', fieldName);
					alert( msg );
				    bValid =  false;
				}
			 } else {
				field.focus();
				var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
				//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
				var msg = portalPage.getMessageResourceByParam('ev.error.validation.date', fieldName);
				alert( msg );
				bValid =  false;
			 }
		 } else if ((orderMonth < orderYear && orderMonth > orderDay)) {
			 var iDelim1 = orderDay + DAY.length;
			 var iDelim2 = orderMonth + MONTH.length;
			 var delim1 = datePattern.substring(iDelim1, iDelim1 + 1);
			 var delim2 = datePattern.substring(iDelim2, iDelim2 + 1);
			 if (iDelim1 == orderMonth && iDelim2 == orderYear) {
				 dateRegexp = new RegExp("^(\\d{2})(\\d{2})(\\d{4})$");
			 } else if (iDelim1 == orderMonth) {
				 dateRegexp = new RegExp("^(\\d{2})(\\d{2})[" + delim2 + "](\\d{4})$");
			 } else if (iDelim2 == orderYear) {
				 dateRegexp = new RegExp("^(\\d{2})[" + delim1 + "](\\d{2})(\\d{4})$");
			 } else {
				 dateRegexp = new RegExp("^(\\d{2})[" + delim1 + "](\\d{2})[" + delim2 + "](\\d{4})$");
			 }
			 var matched = dateRegexp.exec(value);
			 if(matched != null) {
				 if (!this.isValidDate(matched[1], matched[2], matched[3])) {
					field.focus();
					var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
					//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
					var msg = portalPage.getMessageResourceByParam('ev.error.validation.date', fieldName);
					alert( msg );
				    bValid =  false;
				  }
			 } else {
				 field.focus();
				 var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
				 //var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
				 var msg = portalPage.getMessageResourceByParam('ev.error.validation.date', fieldName);
				 alert( msg );
				 bValid =  false;
			 }
		 } else if ((orderMonth > orderYear && orderMonth < orderDay)) {
			 var iDelim1 = orderYear + YEAR.length;
			 var iDelim2 = orderMonth + MONTH.length;
			 var delim1 = datePattern.substring(iDelim1, iDelim1 + 1);
			 var delim2 = datePattern.substring(iDelim2, iDelim2 + 1);
			 if (iDelim1 == orderMonth && iDelim2 == orderDay) {
				 dateRegexp = new RegExp("^(\\d{4})(\\d{2})(\\d{2})$");
			 } else if (iDelim1 == orderMonth) {
				 dateRegexp = new RegExp("^(\\d{4})(\\d{2})[" + delim2 + "](\\d{2})$");
			 } else if (iDelim2 == orderDay) {
				 dateRegexp = new RegExp("^(\\d{4})[" + delim1 + "](\\d{2})(\\d{2})$");
			 } else {
				 dateRegexp = new RegExp("^(\\d{4})[" + delim1 + "](\\d{2})[" + delim2 + "](\\d{2})$");
			 }
			 var matched = dateRegexp.exec(value);
			 if(matched != null) {
				 if (!this.isValidDate(matched[3], matched[2], matched[1])) {
					 field.focus();
					 var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
					 //var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
					 var msg = portalPage.getMessageResourceByParam('ev.error.validation.date', fieldName);
					 alert( msg );
					 bValid =  false;
				  }
			  } else {
				  field.focus();
				  var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
				  //var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
				  var msg = portalPage.getMessageResourceByParam('ev.error.validation.date', fieldName);
				  alert( msg );
				  bValid =  false;
			  }
		 } else {
			 field.focus();
			 var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
			 //var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
			 var msg = portalPage.getMessageResourceByParam('ev.error.validation.date', fieldName);
			 alert( msg );
			 bValid =  false;
		 }
	  }
	   return bValid;
	},
	isValidDate : function(day, month, year) 
	{
		if (month < 1 || month > 12) {
			return false;
		}
		if (day < 1 || day > 31) {
			return false;
		}
		if ((month == 4 || month == 6 || month == 9 || month == 11) &&
			(day == 31)) {
			return false;
		}
		if (month == 2) {
			var leap = (year % 4 == 0 &&
					   (year % 100 != 0 || year % 400 == 0));
			if (day>29 || (day == 29 && !leap)) {
				return false;
			}
		}
		return true;
	},
	/* int??è¸°ë¶¿ìž ï§£ëŒ„ê²• */
	validateIntRange : function(data, form) 
	{
		var isValid = true;
		var field = form[data.fieldName];
			
		if ((field.type == 'text' ||
			 field.type == 'textarea') &&
			(field.value.length > 0)) {
			
			var iMin = parseInt(data.min);
			var iMax = parseInt(data.max);
			var iValue = parseInt(field.value);
			if (!(iValue >= iMin && iValue <= iMax)) {
				field.focus();
				var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
				//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
				var msg = portalPage.getMessageResourceByParam('ev.error.validation.intRange', fieldName);
				alert( msg );
				isValid = false;
			}
		}
		return isValid;
	},
	/* Float??è¸°ë¶¿ìžï§£ëŒ„ê²• */
	validateFloatRange : function(data, form) 
	{
		var isValid = true;
		var field = form[data.fieldName];
			
		if ((field.type == 'text' ||
			 field.type == 'textarea') &&
			(field.value.length > 0)) {
			
			var fMin = parseFloat(data.min);
			var fMax = parseFloat(data.max);
			var fValue = parseFloat(field.value);
			if (!(fValue >= fMin && fValue <= fMax)) {
				field.focus();
				var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
				//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
				var msg = portalPage.getMessageResourceByParam('ev.error.validation.floatRange', fieldName);
				alert( msg );
				isValid = false;
			}
		}
		return isValid;
	},
	/* ?ì¢ŽìŠœç§»ëŒ€ë±¶è¸°ëŠìƒ‡ï§£ëŒ„ê²• */
	validateCreditCard : function(data, form) 
	{
		var bValid = true;
		var field = form[data.fieldName];
		if ((field.type == 'text' ||
			 field.type == 'textarea') &&
			(field.value.length > 0)) {
			if (!this.luhnCheck(field.value)) {
				field.focus();
				var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
				//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
				var msg = portalPage.getMessageResourceByParam('ev.error.validation.creditCard', fieldName);
				alert( msg );
				bValid = false;
			}
		}
		return bValid;
	},
	/**
	 * Reference: http://www.ling.nwu.edu/~sburke/pub/luhn_lib.pl
	 */
	luhnCheck : function(cardNumber) 
	{
		if (this.isLuhnNum(cardNumber)) {
			var no_digit = cardNumber.length;
			var oddoeven = no_digit & 1;
			var sum = 0;
			for (var count = 0; count < no_digit; count++) {
				var digit = parseInt(cardNumber.charAt(count));
				if (!((count & 1) ^ oddoeven)) {
					digit *= 2;
					if (digit > 9) digit -= 9;
				};
				sum += digit;
			};
			if (sum == 0) return false;
			if (sum % 10 == 0) return true;
		};
		return false;
	},
	isLuhnNum : function(argvalue) 
	{
		argvalue = argvalue.toString();
		if (argvalue.length == 0) {
			return false;
		}
		for (var n = 0; n < argvalue.length; n++) {
			if ((argvalue.substring(n, n+1) < "0") ||
				(argvalue.substring(n,n+1) > "9")) {
				return false;
			}
		}
		return true;
	},
	/* Emailï§£ëŒ„ê²• */
	validateEmail : function(data, form) 
	{
		var bValid = true;
		var field = form[data.fieldName];
		if ((field.type == 'text' ||
			 field.type == 'textarea') &&
			(field.value.length > 0)) {
			if (!this.checkEmail(field.value)) {
				field.focus();
				var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
				//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
				var msg = portalPage.getMessageResourceByParam('ev.error.validation.email', fieldName);
				alert( msg );
				bValid = false;
			}
		}
		return bValid;
	},
	/**
	 * Reference: Sandeep V. Tamhankar (stamhankar@hotmail.com),
	 * http://javascript.internet.com
	 */
	checkEmail : function (emailStr) 
	{
	   if (emailStr.length == 0) {
		   return true;
	   }
	   var emailPat=/^(.+)@(.+)$/;
	   var specialChars="\\(\\)<>@,;:\\\\\\\"\\.\\[\\]";
	   var validChars="\[^\\s" + specialChars + "\]";
	   var quotedUser="(\"[^\"]*\")";
	   var ipDomainPat=/^(\d{1,3})[.](\d{1,3})[.](\d{1,3})[.](\d{1,3})$/;
	   var atom=validChars + '+';
	   var word="(" + atom + "|" + quotedUser + ")";
	   var userPat=new RegExp("^" + word + "(\\." + word + ")*$");
	   var domainPat=new RegExp("^" + atom + "(\\." + atom + ")*$");
	   var matchArray=emailStr.match(emailPat);
	   if (matchArray == null) {
		   return false;
	   }
	   var user=matchArray[1];
	   var domain=matchArray[2];
	   if (user.match(userPat) == null) {
		   return false;
	   }
	   var IPArray = domain.match(ipDomainPat);
	   if (IPArray != null) {
		   for (var i = 1; i <= 4; i++) {
			  if (IPArray[i] > 255) {
				 return false;
			  }
		   }
		   return true;
	   }
	   var domainArray=domain.match(domainPat);
	   if (domainArray == null) {
		   return false;
	   }
	   var atomPat=new RegExp(atom,"g");
	   var domArr=domain.match(atomPat);
	   var len=domArr.length;
	   if ((domArr[domArr.length-1].length < 2) ||
		   (domArr[domArr.length-1].length > 3)) {
		   return false;
	   }
	   if (len < 2) {
		   return false;
	   }
	   return true;
	},
	/* äºŒì‡°??ê¹…ì¤‰è¸°ëŠìƒ‡ validation. */ 
	validateIhIdNum : function(data, form) 
	{
		var bValid = true;
		var field = form[data.fieldName];
		if (field.type == 'text' ||
			field.type == 'hidden' ||
			field.type == 'textarea') {
			if (this.trim(field.value).length!=0 && !this.checkIhIdNum(field.value)) {
				form[data.fieldName + '1'].select();
				var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
				//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
				var msg = portalPage.getMessageResourceByParam('ev.error.validation.ssn', fieldName);
				alert( msg );
				bValid = false;
			}
		}
		return bValid;
	},
	/**
	 * Reference: JS Guide
	 * http://jsguide.net/ver2/articles/frame.php?artnum=002
	 */             
	checkIhIdNum : function(ihidnum)
	{	
		fmt = /^\d{6}[123456]\d{6}$/;
		if(!fmt.test(ihidnum)){
			return false;
		}
		var genCode = ihidnum.charAt(7);
		
		switch(genCode){
			case 9: case 0: {
				birthYear = "18";
			} break;
			case 1: case 2: {
				birthYear = "19";
			} break;
			case 3: case 4: {
				birthYear = "20";
			} break;
			case 5: case 6: {
				birthYear = "19";
			} break;
			case 7: case 8: {
				birthYear = "20";
			} break;
			default : birthYear = "00"; break;
		}
		birthYear += ihidnum.substr(0, 2);
		birthMonth = ihidnum.substr(2, 2) - 1;
		birthDate = ihidnum.substr(4, 2);
		birth = new Date(birthYear, birthMonth, birthDate);
		
		if( birth.getYear() % 100 != ihidnum.substr(0, 2) ||
			birth.getMonth() != birthMonth ||
			birth.getDate() != birthDate) {
			return false;
		}
		
		var arrDivide = [2, 3, 4, 5, 6, 7, 8, 9, 2, 3, 4, 5];            	
		var checkdigit = 0;            	
		for(var i=0;i<ihidnum.length-1;i++){
			checkdigit += parseInt(ihidnum.charAt(i)) * parseInt(arrDivide[i]);
		}
		checkdigit = (11 - (checkdigit%11))%10;
		if(checkdigit != ihidnum.charAt(12)){
			return false;
		}else{
			return true;
		}
	},
	
	validateKorean : function(data, form)
	{
		var bValid = true;
		var field = form[data.fieldName];             	
		if (field.type == 'text' || field.type == 'textarea') {
			if (this.trim(field.value).length==0 || !this.checkKorean(field.value)) {
				field.focus();
				var fieldName = (field.getAttribute("label") != null) ? field.getAttribute("label") : data.fieldName; 
				//var fieldName = portalPage.getMessageResource('pt.ev.property.' + ((data.labelName) ? data.labelName : data.fieldName));
				var msg = portalPage.getMessageResourceByParam('ev.error.validation.korean', fieldName);
				alert( msg );
				bValid = false;
			}
		}
		return bValid;
	},
	checkKorean : function(koreanStr)
	{          		
		for(var i=0;i<koreanStr.length;i++){
			var koreanChar = koreanStr.charCodeAt(i);
			if( !( 0xAC00 <= koreanChar && koreanChar <= 0xD7A3 ) && !( 0x3131 <= koreanChar && koreanChar <= 0x318E ) ) { 
				return false;
			}
		}
		return true;
	}
}
e§–ŒÞª      c…’Ñc…’ÑDüŸ1cŽÍ%   `    O^partitionKey=%28https%2Ctukorea.ac.kr%29,:https://portal.tukorea.ac.kr/javascript/validator.js necko:classified 1 strongly-framed 1 security-info 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 request-method GET response-head HTTP/1.1 200 OK
ETag: W/"27976-1493618568000"
Date: Tue, 29 Nov 2022 05:03:33 GMT
Last-Modified: Mon, 01 May 2017 06:02:48 GMT
Content-Type: text/javascript;charset=utf-8
Content-Length: 27976
 original-response-headers ETag: W/"27976-1493618568000"
Date: Tue, 29 Nov 2022 05:03:33 GMT
Last-Modified: Mon, 01 May 2017 06:02:48 GMT
Connection: keep-alive
Content-Type: text/javascript;charset=utf-8
Content-Length: 27976
 ctid 2 uncompressed-len 0 net-response-time-onstart 394 net-response-time-onstop 395   mH